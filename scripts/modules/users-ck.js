var usersModule=angular.module("UsersModule",["ngResource"]);usersModule.config(["$routeProvider",function(e){e.when("/users",{templateUrl:"templates/users/index.html",controller:"usersCtrl"}).when("/users/add",{templateUrl:"templates/users/add.html",controller:"userCtrl"}).when("/users/detail/:id",{templateUrl:"templates/users/detail.html",controller:"userDetailCtrl"}).when("/users/edit/:id",{templateUrl:"templates/users/edit.html",controller:"userCtrl"}).otherwise({redirectTo:"/404"})}]);usersModule.factory("Users",function(e){return e("api/users/:id",{},{query:{method:"GET",isArray:!0}})});usersModule.controller("usersCtrl",function(e,t){e.filters={query:"",orderBy:"firstname",order:!1};e.view="block"});usersModule.controller("userCtrl",function(e,t,n,r){e.newUser={type:"user"};e.getCurrentUser=function(){angular.isObject(e.user)||n.id&&(e.user=r.get({id:n.id}))};e.getCurrentUser();e.addUser=function(){r.save(e.newUser,function(t){e.users.push(t);e.newUser=angular.copy({})});t.path("/users")};e.deleteUser=function(n){if(confirm("Delete '"+n.firstname+"'?")){var r=e.$parent.getUser(n._id),i=jQuery.inArray(r,e.users);e.users.splice(i,1);console.log("User delete: ",n._id);t.path("/users")}};e.editUser=function(){console.log(e.user)}});usersModule.controller("userDetailCtrl",function(e,t,n,r){e.user=r.get({id:n.id});e.currentId=n.id});